<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VM Auto - Panel Admina</title>
    <link rel="stylesheet" href="css/admin.css">
    <!-- Cloudinary Upload Widget -->
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>VM Auto</h1>
                <p>Panel Administracyjny</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="password">Hasło dostępu</label>
                    <input type="password" id="password" name="password" required placeholder="Wprowadź hasło" autofocus>
                </div>
                <button type="submit" class="btn btn-primary">Zaloguj się</button>
                <p id="loginError" class="login-error"></p>
            </form>
        </div>
    </div>

    <!-- Main Admin Panel (Hidden until login) -->
    <div class="container" id="adminPanel" style="display: none;">
        <!-- Header -->
        <header class="admin-header">
            <div class="admin-header-content">
                <div>
                    <h1>VM Auto - Panel Administracyjny</h1>
                    <p>Zarządzaj swoimi samochodami</p>
                </div>
                <a href="index.html" class="btn-back-home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                    Strona główna
                </a>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="add-car">Dodaj Auto</button>
            <button class="tab-btn" data-tab="car-list">Lista Aut</button>
        </div>

        <!-- Add Car Form -->
        <div id="add-car" class="tab-content active">
            <div class="form-container">
                <h2>Dodaj Nowy Samochód</h2>
                <form id="addCarForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="brand">Marka *</label>
                            <input type="text" id="brand" name="brand" required placeholder="np. Citroën">
                        </div>
                        <div class="form-group">
                            <label for="model">Model *</label>
                            <input type="text" id="model" name="model" required placeholder="np. C4">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="year">Rok produkcji *</label>
                            <input type="number" id="year" name="year" required min="1900" max="2026" placeholder="2021">
                        </div>
                        <div class="form-group">
                            <label for="price">Cena (PLN) *</label>
                            <input type="number" id="price" name="price" required min="0" placeholder="65000">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="mileage">Przebieg (km)</label>
                            <input type="number" id="mileage" name="mileage" min="0" placeholder="35000">
                        </div>
                        <div class="form-group">
                            <label for="fuel_type">Paliwo</label>
                            <select id="fuel_type" name="fuel_type">
                                <option value="">Wybierz...</option>
                                <option value="Benzyna">Benzyna</option>
                                <option value="Diesel">Diesel</option>
                                <option value="Benzyna + LPG">Benzyna + LPG</option>
                                <option value="Elektryczny">Elektryczny</option>
                                <option value="Hybryda">Hybryda</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="transmission">Skrzynia biegów</label>
                            <select id="transmission" name="transmission">
                                <option value="">Wybierz...</option>
                                <option value="Manualna">Manualna</option>
                                <option value="Automatyczna">Automatyczna</option>
                                <option value="Półautomatyczna">Półautomatyczna</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="engine_capacity">Pojemność silnika (L)</label>
                            <input type="text" id="engine_capacity" name="engine_capacity" placeholder="1.2">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="power">Moc (KM)</label>
                            <input type="text" id="power" name="power" placeholder="130 KM">
                        </div>
                        <div class="form-group">
                            <label for="body_type">Typ nadwozia</label>
                            <select id="body_type" name="body_type">
                                <option value="">Wybierz...</option>
                                <option value="Sedan">Sedan</option>
                                <option value="Hatchback">Hatchback</option>
                                <option value="Kombi">Kombi</option>
                                <option value="SUV">SUV</option>
                                <option value="Coupe">Coupe</option>
                                <option value="Cabrio">Cabrio</option>
                                <option value="Van">Van</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="color">Kolor</label>
                            <input type="text" id="color" name="color" placeholder="Biały">
                        </div>
                        <div class="form-group">
                            <label for="vin">VIN</label>
                            <input type="text" id="vin" name="vin" placeholder="VF7XXXXXXXX123456">
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="description">Opis</label>
                        <textarea id="description" name="description" rows="4" placeholder="Szczegółowy opis samochodu..."></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label for="features">Wyposażenie (oddziel przecinkami)</label>
                        <input type="text" id="features" name="features" placeholder="Klimatyzacja automatyczna, Nawigacja, Kamera cofania">
                    </div>

                    <!-- Image Upload Section -->
                    <div class="form-group full-width">
                        <label>Zdjęcia samochodu</label>
                        <button type="button" class="btn btn-secondary" id="uploadWidget">Dodaj zdjęcia</button>
                        <div id="imagePreview" class="image-preview-grid"></div>
                        <input type="hidden" id="images" name="images">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="contact_phone">Telefon kontaktowy</label>
                            <input type="tel" id="contact_phone" name="contact_phone" placeholder="+48 123 456 789">
                        </div>
                        <div class="form-group">
                            <label for="contact_email">Email kontaktowy</label>
                            <input type="email" id="contact_email" name="contact_email" placeholder="kontakt@vmauto.pl">
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="autoplac_link">Link do Autoplac (opcjonalnie)</label>
                        <input type="url" id="autoplac_link" name="autoplac_link" placeholder="https://autoplac.pl/oferta/12345">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Dodaj Samochód</button>
                        <button type="reset" class="btn btn-secondary">Wyczyść</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Car List -->
        <div id="car-list" class="tab-content">
            <div class="list-header">
                <h2>Lista Samochodów</h2>
                <button class="btn btn-refresh" onclick="loadCars()">Odśwież</button>
            </div>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Szukaj po marce, modelu..." onkeyup="filterCars()">
            </div>

            <div id="carsContainer" class="cars-grid">
                <p class="loading">Ładowanie samochodów...</p>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="spinner"></div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast" class="toast"></div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edytuj Samochód</h2>
            <form id="editCarForm">
                <input type="hidden" id="edit_car_id">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit_brand">Marka</label>
                        <input type="text" id="edit_brand" name="brand" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_model">Model</label>
                        <input type="text" id="edit_model" name="model" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit_year">Rok</label>
                        <input type="number" id="edit_year" name="year" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_price">Cena</label>
                        <input type="number" id="edit_price" name="price" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit_mileage">Przebieg</label>
                        <input type="number" id="edit_mileage" name="mileage">
                    </div>
                    <div class="form-group">
                        <label for="edit_fuel_type">Paliwo</label>
                        <input type="text" id="edit_fuel_type" name="fuel_type">
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="edit_description">Opis</label>
                    <textarea id="edit_description" name="description" rows="4"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Zapisz zmiany</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Anuluj</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
